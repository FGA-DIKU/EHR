
# Configuration file for cohort selection in a fine-tuning pipeline using EHR data.  
logging: 
  level: INFO      # Defines the logging level (INFO, DEBUG, ERROR, etc.)
  path: ./outputs/logs   # Specifies the directory where log files will be stored

paths:
  ### Inputs
  features: ./outputs/features
  initial_pids: ./outputs/tokenized/pids_tuning.pt # _optional_ Initial patients to select from [list of pids] 
  exposure: ./outputs/outcomes/TEST_CENSOR.csv # _optional_ Path to exposure data; defaults to outcome if not specified.For multiple exposures, create a joint exposure file.
  outcome: ./outputs/outcomes/TEST_OUTCOME.csv  #Path to the outcome labels used for cohort selection.  
  # exclude_pids: # optional, if provided, exclude these pids from the cohort
  
  ### Outputs
  cohort: ./outputs/cohort # Directory where the final selected cohort data will be stored. 
selection:
  exclude_prior_outcomes: true # Exclude patients who had the outcome before the index date.
  exposed_only: false # If true, only include patients who have an exposure event.
  age:
    min_years: 18  # Minimum age (inclusive) for patient inclusion.
    max_years: 120 #Maximum age (inclusive) for patient inclusion.
  categories: # Define inclusion or exclusion criteria for categorical variables.
    GENDER: # column name in the data
      include: [M] # Include only male patients. Use 'exclude' instead to remove certain categories.

index_date:   # Defines the reference date used for cohort selection and analysis
# if not provided we can use exposures to get the index dates
  mode: relative  # Can be 'absolute' (fixed date) or 'relative' (based on exposure).
  absolute:   # Defines a fixed index date.
    year: 2015 # The reference year for the fixed date.
    month: 1  # The reference month for the fixed date (January).
    day: 26  # The reference day for the fixed date.
  relative: # takes first exposure as index date
    n_hours_from_exposure: -24  # Index date is **24 hours before** exposure (negative = before, 0 = at exposure, positive = after)

cv_folds: 1 # can be set to 1 if only a simple train/val split is needed
val_ratio: 0.1 # only used if cv_folds is set to 1
test_ratio: 0.1 # can be set to 1 for test set creation only
